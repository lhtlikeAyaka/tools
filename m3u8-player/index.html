<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M3U8 Player - LHTools</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        body { background-color: #f0f9ff; color: #1e293b; }
        .glass-box { background: white; border: 1px solid #e0f2fe; }
        video { background: #000; border-radius: 12px; }
    </style>
</head>
<body class="min-h-screen opacity-0" id="body">
    <nav class="bg-white border-b border-blue-100 p-4">
        <div class="container mx-auto flex justify-between items-center">
            <a href="/" class="flex items-center space-x-2">
                <div class="bg-blue-600 text-white px-2 py-0.5 rounded font-bold text-lg">LH</div>
                <span class="font-bold text-slate-700">TOOLS</span>
            </a>
            <div class="flex items-center space-x-4">
                <select id="langSelect" onchange="changeLang(this.value)" class="text-xs border-none bg-transparent text-blue-600 outline-none">
                    <option value="en">English</option>
                    <option value="zh">简体中文</option>
                    <option value="zh-tw">繁體中文</option>
                    <option value="ja">日本語</option>
                </select>
                <a href="/" class="text-sm text-slate-400" data-i18n="back">返回首页</a>
            </div>
        </div>
    </nav>

    <main class="container mx-auto px-4 max-w-4xl py-10">
        <div class="glass-box p-2 rounded-2xl shadow-xl shadow-blue-200/50 mb-8">
            <video id="video" class="w-full aspect-video" controls></video>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div onclick="document.getElementById('fileInput').click()" class="glass-box p-6 rounded-xl text-center cursor-pointer hover:bg-blue-50 border-2 border-dashed border-blue-100 transition">
                <input type="file" id="fileInput" class="hidden" accept=".m3u8">
                <span class="text-blue-600 text-sm font-medium" data-i18n="select_file">选择本地 .m3u8 文件</span>
            </div>
            <div class="glass-box p-6 rounded-xl flex space-x-2">
                <input type="text" id="urlInput" data-i18n-placeholder="placeholder_url" class="flex-1 bg-slate-50 border border-blue-100 rounded-lg px-4 py-2 text-sm outline-none">
                <button onclick="loadUrl()" class="bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-bold shadow-md" data-i18n="play">播放</button>
            </div>
        </div>
    </main>

    <script>
        const langData = {
            en: { back: "Home", select_file: "Choose Local .m3u8", placeholder_url: "Video URL...", play: "Play" },
            zh: { back: "返回首页", select_file: "选择本地 .m3u8 文件", placeholder_url: "输入视频流地址...", play: "播放" },
            "zh-tw": { back: "返回首頁", select_file: "選擇本地 .m3u8 文件", placeholder_url: "輸入視頻流地址...", play: "播放" },
            ja: { back: "ホーム", select_file: "ローカルファイルを選択", placeholder_url: "動画URLを入力...", play: "再生" }
        };

        function updateUI(lang) {
            document.querySelectorAll('[data-i18n]').forEach(el => {
                el.innerText = langData[lang][el.getAttribute('data-i18n')];
            });
            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                el.placeholder = langData[lang][el.getAttribute('data-i18n-placeholder')];
            });
            document.getElementById('langSelect').value = lang;
            document.getElementById('body').style.opacity = 1;
        }

        function changeLang(lang) {
            localStorage.setItem('lht_lang', lang);
            updateUI(lang);
        }

        const currentLang = localStorage.getItem('lht_lang') || (navigator.language.includes('zh') ? (navigator.language.includes('tw') ? 'zh-tw' : 'zh') : (navigator.language.includes('ja') ? 'ja' : 'en'));
        updateUI(currentLang);

        // 播放逻辑... (保持之前代码一致)
        const video = document.getElementById('video');
        let hls = new Hls();
        function playSource(src) {
            if (Hls.isSupported()) {
                hls.destroy(); hls = new Hls();
                hls.loadSource(src); hls.attachMedia(video);
                hls.on(Hls.Events.MANIFEST_PARSED, () => video.play());
            }
        }
        function loadUrl() { const url = document.getElementById('urlInput').value.trim(); if (url) playSource(url); }
        document.getElementById('fileInput').addEventListener('change', (e) => { if (e.target.files[0]) playSource(URL.createObjectURL(e.target.files[0])); });
    </script>
</body>
</html>